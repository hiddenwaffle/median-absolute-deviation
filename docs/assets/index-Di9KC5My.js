(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}})();function M(t,e,o){const a=new google.visualization.DataTable;a.addColumn("number","Count");for(let i of o)a.addRow([i]);const n={title:t,width:420,height:320,legend:{position:"none"},hAxis:{showTextEvery:Math.floor(10)}},r=document.getElementById(e);new google.visualization.Histogram(r).draw(a,n)}function D(t,e,o,a,n,r,s){var i=google.visualization.arrayToDataTable([["Distribution","Avg Mean Difference %","Avg Std Dev Difference %"],["Uniform",o.mean*100,o.stddev*100],["Symmetric",a.mean*100,a.stddev*100],["Skewed",n.mean*100,n.stddev*100]]),c={chart:{title:t,subtitle:"Lower is better"},bars:"horizontal",hAxis:{format:"decimal",viewWindow:{min:r,max:s}},width:1280,height:400,colors:["#89138a","#e6bb18"]},d=new google.charts.Bar(document.getElementById(e));d.draw(i,google.charts.Bar.convertOptions(c))}function u(t){return document.getElementById(t)}function g(t,e=!0){const o=u(t),a=o.value;let n=Math.floor(Math.abs(parseInt(a)));return(isNaN(n)||n<0)&&(n=0),e&&n===0&&(n=1),o.value=n,n}function O(){u("start-button").style.display="block",["population-chart-section","comparison-section"].forEach(t=>{u(t).style.display="none"})}function $(){u("population-chart-section").style.display="flex"}function U(){u("comparison-section").style.display="block"}function k(t){t?u("start-button").disabled="":u("start-button").disabled="disabled"}function b(t,e){u(t).value=`Mean     ${e.mean.toFixed(2)}
SD       ${e.stddev.toFixed(2)}

Median   ${e.median.toFixed(2)}
MAD1     ${e.mad1.toFixed(2)}
MAD2     ${e.mad2.toFixed(2)}`}function q(t){return Math.floor(t*1.25+Math.random()*t/3)}function x(t,e,o){const a=[];for(let n=0;n<t;n++)a.push(Math.floor(e()*t));for(let n=0;n<o;n++)a.push(q(t));return a}function R(t,e){return x(t,()=>Math.random(),e)}function _(t,e){return x(t,()=>(Math.random()+Math.random()+Math.random()+Math.random())/4,e)}function j(t,e){return x(t,()=>Math.max(Math.random(),Math.random(),Math.random(),Math.random()),e)}function G(t){return t%2}function H(t,e){return Math.sqrt(t.map(o=>(o-e)**2).reduce((o,a)=>o+a,0)/t.length)}function K(t,e){return T(t.map(o=>Math.abs(o-e)))}function W(t,e){return t.map(o=>Math.abs(o-e)).reduce((o,a)=>o+a,0)/t.length}function T(t){const e=t.sort((o,a)=>o-a);return G(e.length)?e[Math.floor(e.length/2)]:(e[e.length/2-1]+e[e.length/2])/2}function m(t,e=!1){const o=t.reduce((i,c)=>i+c,0)/(e?t.length:t.length-1),a=H(t,o),n=T(t),r=K(t,n),s=W(t,n);return{median:n,mean:o,stddev:a,mad1:r,mad2:s}}function X(t){const e=[...t];for(let o=e.length-1;o>0;o-=1){const a=Math.floor(Math.random()*(o+1)),n=e[a],r=e[o];e[o]=n,e[a]=r}return e}function P(t,e){return X(t).slice(0,e)}function w(t,e){return t.map(o=>Math.abs(o-e)/e)}function A(t,e){const o=e.map(l=>l.stddev),a=e.map(l=>l.mad1),n=e.map(l=>l.mad2),r=w(o,t.stddev),s=w(a,t.mad1),i=w(n,t.mad2),c=m(r),d=m(s),f=m(i);return{stddevPercentDiffStats:c,mad1PercentDiffStats:d,mad2PercentDiffStats:f}}function J(t,e,o){let a=Number.MAX_SAFE_INTEGER,n=0;for(let r of[t,e,o])for(let s of["stddevPercentDiffStats","mad1PercentDiffStats","mad2PercentDiffStats"]){const i=r[s],c=Math.min(i.mean,i.stddev),d=Math.max(i.mean,i.stddev);c<a&&(a=c),d>n&&(n=d)}return console.log("found:",a*100,n*100),[a*100,n*100]}google.charts.load("current",{packages:["corechart","bar"]});google.charts.setOnLoadCallback(()=>{O(),setTimeout(()=>{document.getElementById("start-button").click()},1)});document.getElementById("parameters-form").addEventListener("submit",t=>{t.preventDefault(),O(),setTimeout(()=>Q(),33)});function Q(){k(!1);const t=g("population-size"),e=g("sample-size"),o=g("sample-count"),a=g("outliers-count",!1),n=R(t,a),r=_(t,a),s=j(t,a);M("Uniform Population","popchart-uniform",n),M("Symmetric Population","popchart-symmetric",r),M("Skewed Population","popchart-skewed",s);const i=m(n,!0),c=m(r,!0),d=m(s,!0);b("population-uniform-stats",i),b("population-symmetric-stats",c),b("population-skewed-stats",d),$(),setTimeout(()=>{const f=[],l=[],C=[];for(let E=0;E<o;E++){const F=P(n,e),L=m(F);f.push(L);const B=P(r,e),I=m(B);l.push(I);const N=P(s,e),z=m(N);C.push(z)}const p=A(i,f),h=A(c,l),S=A(d,C),[y,v]=J(p,h,S);D("Standard Deviation Percent Difference","stddev-comparison-chart",p.stddevPercentDiffStats,h.stddevPercentDiffStats,S.stddevPercentDiffStats,y,v),D("Median Absolute Deviation #1 Percent Difference","mad1-comparison-chart",p.mad1PercentDiffStats,h.mad1PercentDiffStats,S.mad1PercentDiffStats,y,v),D("Median Absolute Deviation #2 Percent Difference","mad2-comparison-chart",p.mad2PercentDiffStats,h.mad2PercentDiffStats,S.mad2PercentDiffStats,y,v),U(),k(!0)},33)}
