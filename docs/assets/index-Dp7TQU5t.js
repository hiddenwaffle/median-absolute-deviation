(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();function S(t,e,n){const a=new google.visualization.DataTable;a.addColumn("number","Count");for(let i of n)a.addRow([i]);const o={title:t,width:420,height:320,legend:{position:"none"},hAxis:{showTextEvery:Math.floor(10)}},r=document.getElementById(e);new google.visualization.Histogram(r).draw(a,o)}function y(t,e,n,a,o,r,s){var i=google.visualization.arrayToDataTable([["Distribution","Avg Mean Difference %","Avg Std Dev Difference %"],["Uniform",n.mean*100,n.stddev*100],["Symmetric",a.mean*100,a.stddev*100],["Skewed",o.mean*100,o.stddev*100]]),c={chart:{title:t,subtitle:"Lower is better"},bars:"horizontal",hAxis:{format:"decimal",viewWindow:{min:r,max:s}},width:1280,height:400,colors:["#89138a","#e6bb18"]},l=new google.charts.Bar(document.getElementById(e));l.draw(i,google.charts.Bar.convertOptions(c))}function d(t){return document.getElementById(t)}function p(t,e=!0){const n=d(t),a=n.value;let o=Math.floor(Math.abs(parseInt(a)));return(isNaN(o)||o<0)&&(o=0),e&&o===0&&(o=1),n.value=o,o}function k(){d("start-button").style.display="inline-block",["population-chart-section","samples-progress-bar-section","comparison-section"].forEach(t=>{d(t).style.display="none"})}function N(){d("population-chart-section").style.display="flex"}function C(t,e,n=!1){const a=Math.floor(t/e*100),o=d("samples-progress-bar");o.style.width=`${a}%`,o.innerText=`${a}%`;const r=d("samples-progress-bar-text");n?r.innerText="":r.innerText="Generating Samples..."}function U(){d("samples-progress-bar-section").style.display="block"}function G(){d("comparison-section").style.display="block"}function B(t){t?d("start-button").disabled="":d("start-button").disabled="disabled"}function M(t,e){d(t).value=`Mean     ${e.mean.toFixed(2)}
SD       ${e.stddev.toFixed(2)}

Median   ${e.median.toFixed(2)}
MAD1     ${e.mad1.toFixed(2)}
MAD2     ${e.mad2.toFixed(2)}`}function q(t,e){return Math.floor(t+Math.random()*e)}function P(t,e,n,a,o){const r=[];for(let s=0;s<t;s++)r.push(Math.floor(e()*t));for(let s=0;s<n;s++)r.push(q(a,o));return r}function R(t,e,n,a){return P(t,()=>Math.random(),e,n,a)}function _(t,e,n,a){return P(t,()=>(Math.random()+Math.random()+Math.random()+Math.random())/4,e,n,a)}function j(t,e,n,a){return P(t,()=>Math.max(Math.random(),Math.random(),Math.random(),Math.random()),e,n,a)}function H(t){return t%2}function K(t,e){return Math.sqrt(t.map(n=>(n-e)**2).reduce((n,a)=>n+a,0)/t.length)}function W(t,e){return O(t.map(n=>Math.abs(n-e)))}function X(t,e){return t.map(n=>Math.abs(n-e)).reduce((n,a)=>n+a,0)/t.length}function O(t){const e=t.sort((n,a)=>n-a);return H(e.length)?e[Math.floor(e.length/2)]:(e[e.length/2-1]+e[e.length/2])/2}function m(t,e=!1){const n=t.reduce((i,c)=>i+c,0)/(e?t.length:t.length-1),a=K(t,n),o=O(t),r=W(t,o),s=X(t,o);return{median:o,mean:n,stddev:a,mad1:r,mad2:s}}function J(t){const e=[...t];for(let n=e.length-1;n>0;n-=1){const a=Math.floor(Math.random()*(n+1)),o=e[a],r=e[n];e[n]=o,e[a]=r}return e}function v(t,e){return J(t).slice(0,e)}function D(t,e){return t.map(n=>Math.abs(n-e)/e)}function b(t,e){const n=e.map(f=>f.stddev),a=e.map(f=>f.mad1),o=e.map(f=>f.mad2),r=D(n,t.stddev),s=D(a,t.mad1),i=D(o,t.mad2),c=m(r),l=m(s),u=m(i);return{stddevPercentDiffStats:c,mad1PercentDiffStats:l,mad2PercentDiffStats:u}}function Q(t,e,n){let a=Number.MAX_SAFE_INTEGER,o=0;for(let r of[t,e,n])for(let s of["stddevPercentDiffStats","mad1PercentDiffStats","mad2PercentDiffStats"]){const i=r[s],c=Math.min(i.mean,i.stddev),l=Math.max(i.mean,i.stddev);c<a&&(a=c),l>o&&(o=l)}return[Math.floor(a*100),Math.ceil(o*100)]}window.onerror=(t,e,n,a,o)=>{alert(`Program Error! Please report this error, and refresh this page to try again:
message: ${t}
source:  ${e}
lineno:  ${n}
error:   ${o}
`),console.error(t,e,n,a,o)};google.charts.load("current",{packages:["corechart","bar"]});google.charts.setOnLoadCallback(()=>{k(),setTimeout(()=>{document.getElementById("start-button").click()},1)});document.getElementById("parameters-form").addEventListener("submit",t=>{t.preventDefault(),k(),setTimeout(()=>Y(),33)});function Y(){B(!1);const t=p("population-size"),e=p("sample-size"),n=p("sample-count"),a=p("outliers-count",!1),o=p("outlier-distance"),r=p("outlier-spread"),s=R(t,a,o,r),i=_(t,a,o,r),c=j(t,a,o,r);S("Uniform Population","popchart-uniform",s),S("Symmetric Population","popchart-symmetric",i),S("Skewed Population","popchart-skewed",c);const l=m(s,!0),u=m(i,!0),f=m(c,!0);M("population-uniform-stats",l),M("population-symmetric-stats",u),M("population-skewed-stats",f),N(),setTimeout(()=>{const w=[],x=[],A=[];function $(){const g=v(s,e),E=m(g);w.push(E);const F=v(i,e),L=m(F);x.push(L);const I=v(c,e),z=m(I);A.push(z)}let h=0;function T(){const g=Date.now();for(;h<n&&(h+=1,$(),!(Date.now()-g>100)););C(h,n),h>=n?(C(h,n,!0),Z(l,u,f,w,x,A)):setTimeout(T,1)}U(),T()},33)}function Z(t,e,n,a,o,r){const s=b(t,a),i=b(e,o),c=b(n,r),[l,u]=Q(s,i,c);y("Standard Deviation Percent Difference","stddev-comparison-chart",s.stddevPercentDiffStats,i.stddevPercentDiffStats,c.stddevPercentDiffStats,l,u),y("Median Absolute Deviation #1 Percent Difference","mad1-comparison-chart",s.mad1PercentDiffStats,i.mad1PercentDiffStats,c.mad1PercentDiffStats,l,u),y("Median Absolute Deviation #2 Percent Difference","mad2-comparison-chart",s.mad2PercentDiffStats,i.mad2PercentDiffStats,c.mad2PercentDiffStats,l,u),G(),B(!0)}
